import{e as u,o as k,c as w,a,h as n,v,b,w as f,T as l,F as m,f as h,p as z,d as g}from"./index-2e4f8d1f.js";import{_ as q}from"./_plugin-vue_export-helper-c27b6911.js";const T="/vue-learn-js/assets/jsmission002-997d86a5.jpg",r=t=>(z("data-v-1afa0ebc"),t=t(),g(),t),S={class:"leftNav"},L={class:"leftNavContainer"},x={class:"leftNavLayout"},V=h('<div class="Main" data-v-1afa0ebc><div class="mainContainer" data-v-1afa0ebc><div class="mainLayout" data-v-1afa0ebc><br data-v-1afa0ebc><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc>總分總</p><p class="fz28" data-v-1afa0ebc>1.要講哪個知識點</p><p class="fz28" data-v-1afa0ebc>2.細講</p><p class="fz28" data-v-1afa0ebc>3.總結</p><br data-v-1afa0ebc><br data-v-1afa0ebc><div id="threeajax001" class="articleCardTitle cor36 fz34" data-v-1afa0ebc> 9.1 AJAX </div><p class="fz28" data-v-1afa0ebc> AJAX 是 &quot;Asynchronous JavaScript and XML&quot;（非同步 JavaScript 和 XML）的縮寫 </p><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc>是 使用 XMLHttpRequest 對象 與 服務器 通信</p><br data-v-1afa0ebc><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc>AJAX 是 瀏覽器 與 服務器 進行 數據通信 的技術</p><p class="fz28" data-v-1afa0ebc> 可以在 不刷新頁面 情況下 與 服務器通信 , 交換數據 , 更新頁面 </p><div id="threeajax002" class="articleCardTitle cor36 fz34" data-v-1afa0ebc> 9.2 xhr , axios , fetch 基本介紹 </div><div class="bgcVS" data-v-1afa0ebc><div data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//原生AJAX get</span></div><div data-v-1afa0ebc><span class="function" data-v-1afa0ebc>const </span><span class="word" data-v-1afa0ebc>xhr</span> <span class="then" data-v-1afa0ebc>=</span><span class="then" data-v-1afa0ebc>new </span><span class="brackets" data-v-1afa0ebc>XMLHttpRequest</span><span class="brackets" data-v-1afa0ebc>()</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>xhr</span> <span class="variable" data-v-1afa0ebc>.open</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="src" data-v-1afa0ebc>&quot;GET&quot;</span><span class="then" data-v-1afa0ebc>,</span> <span class="src" data-v-1afa0ebc>&quot;這裡放url&quot;</span><span class="brackets" data-v-1afa0ebc>) </span><span class="comment" data-v-1afa0ebc>//url後可接請求參數?name=wayne&amp;age=18</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>xhr</span> <span class="variable" data-v-1afa0ebc>.send</span><span class="brackets" data-v-1afa0ebc>()</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>xhr</span><span class="variable" data-v-1afa0ebc>.onreadystatechange</span><span class="then" data-v-1afa0ebc>=</span><span class="function" data-v-1afa0ebc>function </span><span class="brackets" data-v-1afa0ebc>(){</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="then" data-v-1afa0ebc>if</span> <span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>xhr</span><span class="word" data-v-1afa0ebc>.readyState</span><span class="then" data-v-1afa0ebc>===</span><span class="word" data-v-1afa0ebc>XMLHttpRequest.DONE</span><span class="then" data-v-1afa0ebc>&amp;&amp;</span> <span class="word" data-v-1afa0ebc>xhr.status</span><span class="then" data-v-1afa0ebc>===</span> <span class="number" data-v-1afa0ebc>200</span><span class="brackets" data-v-1afa0ebc>){</span><div data-v-1afa0ebc></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>xhr.responseText</span><span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span><span class="brackets" data-v-1afa0ebc>JSON</span><span class="variable" data-v-1afa0ebc>.parse</span><span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>xhr.responseText</span><span class="brackets" data-v-1afa0ebc>))</span></div><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>}</span></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>}</span></div><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//原生AJAX post</span></div><div data-v-1afa0ebc><span class="function" data-v-1afa0ebc>const </span><span class="word" data-v-1afa0ebc>xhr</span> <span class="then" data-v-1afa0ebc>=</span><span class="then" data-v-1afa0ebc>new </span><span class="brackets" data-v-1afa0ebc>XMLHttpRequest</span><span class="brackets" data-v-1afa0ebc>()</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>xhr</span> <span class="variable" data-v-1afa0ebc>.open</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="src" data-v-1afa0ebc>&quot;POST&quot;</span><span class="then" data-v-1afa0ebc>,</span> <span class="src" data-v-1afa0ebc>&quot;這裡放url&quot;</span><span class="brackets" data-v-1afa0ebc>) </span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>xhr</span><span class="word" data-v-1afa0ebc>.setRequestHeader</span><span class="brackets" data-v-1afa0ebc>(</span><span class="src" data-v-1afa0ebc>&quot;Content-Type&quot;</span><span class="then" data-v-1afa0ebc>,</span><span class="src" data-v-1afa0ebc>&quot;application/x-www-form-urlencoded&quot;</span><span class="brackets" data-v-1afa0ebc>)</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>xhr</span> <span class="variable" data-v-1afa0ebc>.send</span><span class="brackets" data-v-1afa0ebc>(</span><span class="src" data-v-1afa0ebc>&quot;name=wayne&amp;age=18&quot;</span><span class="brackets" data-v-1afa0ebc>)</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>xhr</span><span class="variable" data-v-1afa0ebc>.onreadystatechange</span><span class="then" data-v-1afa0ebc>=</span><span class="function" data-v-1afa0ebc>function </span><span class="brackets" data-v-1afa0ebc>(){</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="then" data-v-1afa0ebc>if</span> <span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>xhr</span><span class="word" data-v-1afa0ebc>.readyState</span><span class="then" data-v-1afa0ebc>===</span><span class="word" data-v-1afa0ebc>XMLHttpRequest.DONE</span><span class="then" data-v-1afa0ebc>&amp;&amp;</span> <span class="word" data-v-1afa0ebc>xhr.status</span><span class="then" data-v-1afa0ebc>===</span> <span class="number" data-v-1afa0ebc>200</span><span class="brackets" data-v-1afa0ebc>){</span><div data-v-1afa0ebc></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>xhr.responseText</span><span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span><span class="brackets" data-v-1afa0ebc>JSON</span><span class="variable" data-v-1afa0ebc>.parse</span><span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>xhr.responseText</span><span class="brackets" data-v-1afa0ebc>))</span></div><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>}</span></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>}</span></div><br data-v-1afa0ebc><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//axios get</span></div><div data-v-1afa0ebc><span class="then" data-v-1afa0ebc>＜</span> <span class="number" data-v-1afa0ebc>script </span><span class="function" data-v-1afa0ebc>src</span> <span class="then" data-v-1afa0ebc>=</span><span class="src" data-v-1afa0ebc>&quot;axios.min.js&quot;</span><span class="then" data-v-1afa0ebc>&gt;＜/ </span><span class="number" data-v-1afa0ebc>script </span> <span class="then" data-v-1afa0ebc>&gt;</span></div><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>axios</span><span class="variable" data-v-1afa0ebc>.get</span><span class="brackets" data-v-1afa0ebc>(</span><span class="src" data-v-1afa0ebc>&quot;這裡放url&quot;</span><span class="brackets" data-v-1afa0ebc>)</span></div><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//async + axios</span></div><div data-v-1afa0ebc><span class="function" data-v-1afa0ebc>async </span><span class="brackets" data-v-1afa0ebc>() </span><span class="function" data-v-1afa0ebc>=&gt; </span> <span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="function" data-v-1afa0ebc>const </span><span class="word" data-v-1afa0ebc>res</span> <span class="then" data-v-1afa0ebc>=</span><span class="then" data-v-1afa0ebc>await </span><span class="variable" data-v-1afa0ebc>axios</span><span class="variable" data-v-1afa0ebc>.get</span><span class="brackets" data-v-1afa0ebc>(</span><span class="src" data-v-1afa0ebc>&quot;這裡放url可帶請求參數?name=wayne&amp;age=18&quot;</span><span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>res.data</span><span class="brackets" data-v-1afa0ebc>)</span></div><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>}</span></div><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//請求參數可以寫在params</span></div><div data-v-1afa0ebc><span class="function" data-v-1afa0ebc>async </span><span class="brackets" data-v-1afa0ebc>() </span><span class="function" data-v-1afa0ebc>=&gt; </span> <span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="function" data-v-1afa0ebc>const </span><span class="word" data-v-1afa0ebc>res</span> <span class="then" data-v-1afa0ebc>=</span><span class="then" data-v-1afa0ebc>await </span><span class="variable" data-v-1afa0ebc>axios</span><span class="variable" data-v-1afa0ebc>.get</span><span class="brackets" data-v-1afa0ebc>(</span><span class="src" data-v-1afa0ebc>&quot;這裡放url&quot;</span> <span class="then" data-v-1afa0ebc>,</span><span class="brackets" data-v-1afa0ebc>{</span><div data-v-1afa0ebc></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>params:</span><span class="brackets" data-v-1afa0ebc>{</span><div data-v-1afa0ebc></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>name:</span><span class="src" data-v-1afa0ebc>&quot;wayne&quot;</span> <span class="then" data-v-1afa0ebc>,</span><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>age:</span><span class="number" data-v-1afa0ebc>18</span></div><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>}</span></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>res.data</span><span class="brackets" data-v-1afa0ebc>)</span></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>}</span></div><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//axios post</span></div><div data-v-1afa0ebc><span class="function" data-v-1afa0ebc>async </span><span class="brackets" data-v-1afa0ebc>() </span><span class="function" data-v-1afa0ebc>=&gt; </span> <span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="function" data-v-1afa0ebc>const </span><span class="word" data-v-1afa0ebc>res</span> <span class="then" data-v-1afa0ebc>=</span><span class="then" data-v-1afa0ebc>await </span><span class="variable" data-v-1afa0ebc>axios</span><span class="variable" data-v-1afa0ebc>.post</span><span class="brackets" data-v-1afa0ebc>(</span><span class="src" data-v-1afa0ebc>&quot;這裡放url&quot;</span> <span class="then" data-v-1afa0ebc>,</span><span class="brackets" data-v-1afa0ebc>{</span><div data-v-1afa0ebc></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>name:</span><span class="src" data-v-1afa0ebc>&quot;wayne&quot;</span> <span class="then" data-v-1afa0ebc>,</span><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>age:</span><span class="number" data-v-1afa0ebc>18</span></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>res.data</span><span class="brackets" data-v-1afa0ebc>)</span></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>}</span></div><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//axios 請求攔截器</span></div><div data-v-1afa0ebc><span class="function" data-v-1afa0ebc>async </span><span class="brackets" data-v-1afa0ebc>() </span><span class="function" data-v-1afa0ebc>=&gt; </span> <span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><div data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//只要發送請求 都會經過請求攔截器 處理</span></div><div data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>axios.interceptors.request.use</span><span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>config</span><span class="function" data-v-1afa0ebc>=&gt; </span><span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span><span class="src" data-v-1afa0ebc>&quot;發送了請求&quot;</span><span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc><span class="then" data-v-1afa0ebc>return </span><span class="word" data-v-1afa0ebc>config</span></div><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//響應攔截器</span></div><div data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>axios.interceptors.response,use</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="word" data-v-1afa0ebc>res</span><span class="function" data-v-1afa0ebc>=&gt; </span><span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="then" data-v-1afa0ebc>return </span> <span class="word" data-v-1afa0ebc>res</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div><span class="function" data-v-1afa0ebc>const </span><span class="word" data-v-1afa0ebc>res</span> <span class="then" data-v-1afa0ebc>=</span><span class="then" data-v-1afa0ebc>await </span><span class="variable" data-v-1afa0ebc>axios</span><span class="variable" data-v-1afa0ebc>.get</span><span class="brackets" data-v-1afa0ebc>(</span><span class="src" data-v-1afa0ebc>&quot;這裡放url可帶請求參數?name=wayne&amp;age=18&quot;</span><span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>res.data</span><span class="brackets" data-v-1afa0ebc>)</span></div><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>}</span></div><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//fetch 返回一個 promise</span></div><div data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>fetch</span><span class="brackets" data-v-1afa0ebc>(</span><span class="src" data-v-1afa0ebc>&quot;這裡放url可帶請求參數?name=wayne&amp;age=18&quot;</span><span class="brackets" data-v-1afa0ebc>)</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>.then</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="word" data-v-1afa0ebc>res</span><span class="function" data-v-1afa0ebc>=&gt; </span> <span class="brackets" data-v-1afa0ebc>{</span><div data-v-1afa0ebc></div><div class="padTwo VSL" data-v-1afa0ebc><span class="then" data-v-1afa0ebc>if</span> <span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>res</span> <span class="variable" data-v-1afa0ebc>.ok</span><span class="brackets" data-v-1afa0ebc>){</span><div data-v-1afa0ebc></div><div class="padTwo VSL" data-v-1afa0ebc><span class="then" data-v-1afa0ebc>return </span><span class="word" data-v-1afa0ebc>res</span><span class="variable" data-v-1afa0ebc>.json</span><span class="brackets" data-v-1afa0ebc>()</span></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>}</span></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div><div data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>.then</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="word" data-v-1afa0ebc>data</span><span class="function" data-v-1afa0ebc>=&gt; </span><span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="word" data-v-1afa0ebc>data</span><span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div><br data-v-1afa0ebc></div><div data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//fetch 做 post</span></div><div data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>fetch</span><span class="brackets" data-v-1afa0ebc>(</span><span class="src" data-v-1afa0ebc>&quot;這裡放url&quot;</span><span class="brackets" data-v-1afa0ebc>, {</span></div><div class="padTwo VSL" data-v-1afa0ebc><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>method:</span><span class="src" data-v-1afa0ebc>&quot;POST&quot;</span> <span class="then" data-v-1afa0ebc>,</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>headers: </span><span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="src" data-v-1afa0ebc>&quot;Content-Type&quot;</span><span class="then" data-v-1afa0ebc>: </span><span class="src" data-v-1afa0ebc>&quot;application/json&quot;</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>},</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>body:</span><span class="brackets" data-v-1afa0ebc>JSON</span><span class="variable" data-v-1afa0ebc>.stringify</span><span class="brackets" data-v-1afa0ebc>({</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>name:</span><span class="src" data-v-1afa0ebc>&quot;wayne&quot;</span> <span class="then" data-v-1afa0ebc>,</span><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>age:</span><span class="number" data-v-1afa0ebc>18</span></div><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div><br data-v-1afa0ebc><div class="padTwo VSL" data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>.then</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="word" data-v-1afa0ebc>res</span><span class="function" data-v-1afa0ebc>=&gt; </span><span class="brackets" data-v-1afa0ebc>{</span><div data-v-1afa0ebc></div><div class="padTwo VSL" data-v-1afa0ebc><span class="then" data-v-1afa0ebc>if</span> <span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>res</span><span class="variable" data-v-1afa0ebc>.ok</span><span class="brackets" data-v-1afa0ebc>){</span><div data-v-1afa0ebc></div><div class="padTwo VSL" data-v-1afa0ebc><span class="then" data-v-1afa0ebc>return </span><span class="word" data-v-1afa0ebc>res</span><span class="variable" data-v-1afa0ebc>.json</span><span class="brackets" data-v-1afa0ebc>()</span></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>}</span></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div><div data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>.then</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="word" data-v-1afa0ebc>data</span><span class="function" data-v-1afa0ebc>=&gt; </span><span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="word" data-v-1afa0ebc>data</span><span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div></div></div><div id="threeajax003" class="articleCardTitle cor36 fz34" data-v-1afa0ebc> 9.3 axios </div><a class="fz28" href="https://www.axios-http.cn/" data-v-1afa0ebc>@ axios</a><div class="bgcVS" data-v-1afa0ebc><div data-v-1afa0ebc><span class="then" data-v-1afa0ebc>＜</span> <span class="number" data-v-1afa0ebc>script</span><span class="word" data-v-1afa0ebc></span> <span class="word" data-v-1afa0ebc>src</span><span class="then" data-v-1afa0ebc>=</span><span class="src" data-v-1afa0ebc>&quot;https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js&quot;</span><span class="then" data-v-1afa0ebc>&gt;＜/ </span><span class="number" data-v-1afa0ebc>script</span> <span class="then" data-v-1afa0ebc>&gt;</span></div><div data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>axios</span><span class="brackets" data-v-1afa0ebc>({</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>url:</span><span class="src" data-v-1afa0ebc>&quot;https://randomuser.me/api/&quot;</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span><span class="variable" data-v-1afa0ebc>.then</span><span class="brackets" data-v-1afa0ebc>( ( </span><span class="word" data-v-1afa0ebc>result </span> <span class="brackets" data-v-1afa0ebc>)</span><span class="function" data-v-1afa0ebc>=&gt;</span> <span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console.</span><span class="variable" data-v-1afa0ebc>log</span> <span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>result</span> <span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div></div><p class="fz28" data-v-1afa0ebc>什麼是 URL</p><p class="fz28" data-v-1afa0ebc>統一資源定位符 , 簡稱 網址 , 用於訪問 網路上 資源</p><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="number fz30" data-v-1afa0ebc>http://</span><span class="variable fz30" data-v-1afa0ebc>randomuser.me</span><span class="src fz30" data-v-1afa0ebc>/api/</span></div><div data-v-1afa0ebc><span class="number fz30" data-v-1afa0ebc>協議</span><span class="cor17" data-v-1afa0ebc>......</span><span class="variable fz30" data-v-1afa0ebc>域名</span><span class="cor17" data-v-1afa0ebc>..................</span><span class="src fz30" data-v-1afa0ebc>資源路徑</span></div><br data-v-1afa0ebc><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc>http 協議</p><p class="fz28" data-v-1afa0ebc> 超文本傳輸協議 , 規定瀏覽器和服務器之間傳輸數據的格式 </p><br data-v-1afa0ebc><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc>域名</p><p class="fz28" data-v-1afa0ebc>標記服務器在互聯網中方位</p><br data-v-1afa0ebc><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc>URL 查詢參數</p><p class="fz28" data-v-1afa0ebc> 瀏覽器 提供給 服務器的 額外訊息 , 讓 服務器 返回 瀏覽器 想要的 數據 </p><p class="fz28" data-v-1afa0ebc> http//test.com/test/test<span class="number" data-v-1afa0ebc>?參數名1=值1&amp;參數名2=值2</span></p><div class="bgcVS" data-v-1afa0ebc><p data-v-1afa0ebc>axios 查詢參數</p><p data-v-1afa0ebc>axios 會把參數名和值 , 拼接到 url?參數名=值</p><div data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>axios</span><span class="brackets" data-v-1afa0ebc>({</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>url:</span><span class="src" data-v-1afa0ebc>&quot;https://randomuser.me/api/&quot;</span><div data-v-1afa0ebc></div></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>params:</span> <span class="brackets" data-v-1afa0ebc>{</span><div data-v-1afa0ebc><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>參數名:值</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>}</span></div></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span><span class="variable" data-v-1afa0ebc>.then</span><span class="brackets" data-v-1afa0ebc>( ( </span><span class="word" data-v-1afa0ebc>result </span> <span class="brackets" data-v-1afa0ebc>)</span><span class="function" data-v-1afa0ebc>=&gt;</span> <span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console.</span><span class="variable" data-v-1afa0ebc>log</span> <span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>result</span> <span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div></div><p class="fz28" data-v-1afa0ebc>請求方法: 對服務器資源 , 要執行的操作</p><p class="fz28" data-v-1afa0ebc>GET _ 獲取數據</p><p class="fz28" data-v-1afa0ebc>POST _ 提交數據</p><p class="fz28" data-v-1afa0ebc>PUT _ 修改數據 ( 全部 )</p><p class="fz28" data-v-1afa0ebc>DELETE _ 刪除數據</p><p class="fz28" data-v-1afa0ebc>PATCH _ 修改數據 ( 部分 )</p><div class="bgcVS" data-v-1afa0ebc><p data-v-1afa0ebc>axios 請求數據 + 查詢參數</p><p data-v-1afa0ebc>axios 會把參數名和值 , 拼接到 url?參數名=值</p><div data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>axios</span><span class="brackets" data-v-1afa0ebc>({</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>url:</span><span class="src" data-v-1afa0ebc>&quot;https://randomuser.me/api/&quot;</span><div data-v-1afa0ebc></div></div><div class="padTwo VSL" data-v-1afa0ebc><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>method:</span><span class="src" data-v-1afa0ebc>&quot;請求方法&quot;</span></div><span class="word" data-v-1afa0ebc>params:</span> <span class="brackets" data-v-1afa0ebc>{</span><div data-v-1afa0ebc><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>參數名:值</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>}</span></div></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span><span class="variable" data-v-1afa0ebc>.then</span><span class="brackets" data-v-1afa0ebc>( ( </span><span class="word" data-v-1afa0ebc>result </span> <span class="brackets" data-v-1afa0ebc>)</span><span class="function" data-v-1afa0ebc>=&gt;</span> <span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console.</span><span class="variable" data-v-1afa0ebc>log</span> <span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>result</span> <span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div><br data-v-1afa0ebc><p data-v-1afa0ebc>axios 提交數據到服務器</p><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="then" data-v-1afa0ebc>＜</span> <span class="number" data-v-1afa0ebc>button </span><span class="function" data-v-1afa0ebc>class </span> <span class="then" data-v-1afa0ebc>=</span><span class="src" data-v-1afa0ebc>&quot;btn&quot;</span> <span class="then" data-v-1afa0ebc>&gt;</span><span class="word" data-v-1afa0ebc>註冊</span> <span class="then" data-v-1afa0ebc>＜/</span><span class="number" data-v-1afa0ebc>button</span> <span class="then" data-v-1afa0ebc>&gt;</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>document</span><span class="variable" data-v-1afa0ebc>.querySelector</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="src" data-v-1afa0ebc>&quot;.btn&quot;</span><span class="brackets" data-v-1afa0ebc>)</span><span class="word" data-v-1afa0ebc>.addEventListener</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="src" data-v-1afa0ebc>&quot;click&quot;</span><span class="then" data-v-1afa0ebc>,</span> <span class="brackets" data-v-1afa0ebc>()</span><span class="function" data-v-1afa0ebc>=&gt;</span> <span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>axios</span><span class="brackets" data-v-1afa0ebc>({</span><div data-v-1afa0ebc><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>url:</span> <span class="src" data-v-1afa0ebc>&quot;&quot;,</span><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>method:</span><span class="src" data-v-1afa0ebc>&quot;post&quot;, </span><span class="comment" data-v-1afa0ebc>// 提交數據</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>data:</span><span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><div data-v-1afa0ebc><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>username:</span><span class="src" data-v-1afa0ebc>&quot;&quot;,</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>password:</span><span class="src" data-v-1afa0ebc>&quot;&quot;</span></div></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>}</span></div></div></div></div><div class="padTwo VSL" data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span><span class="variable" data-v-1afa0ebc>.then</span><span class="brackets" data-v-1afa0ebc>((</span> <span class="word" data-v-1afa0ebc>result</span><span class="brackets" data-v-1afa0ebc>)</span> <span class="function" data-v-1afa0ebc>=&gt;</span><span class="brackets" data-v-1afa0ebc>{</span><div data-v-1afa0ebc><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console.</span><span class="variable" data-v-1afa0ebc>log</span><span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>result</span><span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div><br data-v-1afa0ebc><p data-v-1afa0ebc>axios 錯誤處理</p><p data-v-1afa0ebc> 在 then 方法後面 , 調用 catch 方法 , 傳入 回掉函數 並定義 形參 </p><br data-v-1afa0ebc><p data-v-1afa0ebc></p><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="then" data-v-1afa0ebc>＜</span> <span class="number" data-v-1afa0ebc>button </span><span class="function" data-v-1afa0ebc>class </span> <span class="then" data-v-1afa0ebc>=</span><span class="src" data-v-1afa0ebc>&quot;btn&quot;</span> <span class="then" data-v-1afa0ebc>&gt;</span><span class="word" data-v-1afa0ebc>註冊</span> <span class="then" data-v-1afa0ebc>＜/</span><span class="number" data-v-1afa0ebc>button</span> <span class="then" data-v-1afa0ebc>&gt;</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>document</span><span class="variable" data-v-1afa0ebc>.querySelector</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="src" data-v-1afa0ebc>&quot;.btn&quot;</span><span class="brackets" data-v-1afa0ebc>)</span><span class="word" data-v-1afa0ebc>.addEventListener</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="src" data-v-1afa0ebc>&quot;click&quot;</span><span class="then" data-v-1afa0ebc>,</span> <span class="brackets" data-v-1afa0ebc>()</span><span class="function" data-v-1afa0ebc>=&gt;</span> <span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>axios</span><span class="brackets" data-v-1afa0ebc>({</span><div data-v-1afa0ebc><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>url:</span> <span class="src" data-v-1afa0ebc>&quot;&quot;,</span><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>method:</span><span class="src" data-v-1afa0ebc>&quot;post&quot;,</span><span class="comment" data-v-1afa0ebc>// 提交數據</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>data:</span><span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><div data-v-1afa0ebc><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>username:</span><span class="src" data-v-1afa0ebc>&quot;&quot;,</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>password:</span><span class="src" data-v-1afa0ebc>&quot;&quot;</span></div></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>}</span></div></div></div></div><div class="padTwo VSL" data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span><span class="variable" data-v-1afa0ebc>.then</span><span class="brackets" data-v-1afa0ebc>((</span> <span class="word" data-v-1afa0ebc>result</span><span class="brackets" data-v-1afa0ebc>)</span> <span class="function" data-v-1afa0ebc>=&gt;</span><span class="brackets" data-v-1afa0ebc>{</span><div data-v-1afa0ebc><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console.</span><span class="variable" data-v-1afa0ebc>log</span><span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>result</span><span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span><span class="variable" data-v-1afa0ebc>.catch</span><span class="brackets" data-v-1afa0ebc>( ( </span><span class="variable" data-v-1afa0ebc>error </span><span class="brackets" data-v-1afa0ebc>)</span><span class="function" data-v-1afa0ebc>=&gt;</span><span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//處理報錯訊息</span><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="word" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span><span class="variable" data-v-1afa0ebc>error</span><span class="brackets" data-v-1afa0ebc>)</span></div><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div><br data-v-1afa0ebc></div><p class="fz28" data-v-1afa0ebc>HTTP 協議 請求報文</p><p class="fz28" data-v-1afa0ebc> 請求報文: 瀏覽器 按照 HTTP 協議要求的格式 , 發給 服務器 的內容 </p><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc>1 | POST http://test.com/URL網址... HTTP/1.1</p><p class="fz28" data-v-1afa0ebc>2 | ...</p><p class="fz28" data-v-1afa0ebc>3 | ...</p><p class="fz28" data-v-1afa0ebc>4 | ...</p><p class="fz28" data-v-1afa0ebc>5 | ...</p><p class="fz28" data-v-1afa0ebc>6 | ...</p><p class="fz28" data-v-1afa0ebc>7 | Content-Type : application/json</p><p class="fz28" data-v-1afa0ebc>8 | ...</p><p class="fz28" data-v-1afa0ebc>9 | ...</p><p class="fz28" data-v-1afa0ebc>10| ...</p><p class="fz28" data-v-1afa0ebc>11| ...</p><p class="fz28" data-v-1afa0ebc>12|</p><p class="fz28" data-v-1afa0ebc>13| { &quot;username&quot;:&quot;admin&quot;,&quot;password&quot;:&quot;123465&quot; }</p><br data-v-1afa0ebc><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc>請求報文 4 部分</p><p class="fz28" data-v-1afa0ebc>1. 請求行: 請求方法 , URL , 協議</p><p class="fz28" data-v-1afa0ebc> 2. 請求頭: 以鍵值對的格式攜帶的附加訊息 ex Content-Type </p><p class="fz28" data-v-1afa0ebc>3. 空行: 分割請求頭 , 空行之後是發送給服務器的資源</p><p class="fz28" data-v-1afa0ebc>4. 請求體: 發送的資源</p><br data-v-1afa0ebc><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc>HTTP 協議 響應報文</p><p class="fz28" data-v-1afa0ebc> 響應報文: 服務器 按照 HTP 協議要求的格式 , 返回給 瀏覽器 的內容 </p><br data-v-1afa0ebc><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc>響應報文 4 部分</p><p class="fz28" data-v-1afa0ebc>1. 響應行: 協議 , HTTP 響應狀態碼 , 狀態訊息</p><p class="fz28" data-v-1afa0ebc> 2. 響應頭: 以鍵值對的格式攜帶的附加訊息 ex Content-Type </p><p class="fz28" data-v-1afa0ebc>3. 空行: 分割響應頭 , 空行之後是服務器返回的資源</p><p class="fz28" data-v-1afa0ebc>4. 請求體: 返回的資源</p><br data-v-1afa0ebc><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc>1 | HTTP/1.1 400 Bad Request</p><p class="fz28" data-v-1afa0ebc>2 | ...</p><p class="fz28" data-v-1afa0ebc>3 | ...</p><p class="fz28" data-v-1afa0ebc>4 | Content-Type: application/json</p><p class="fz28" data-v-1afa0ebc>5 | ...</p><p class="fz28" data-v-1afa0ebc>6 | ...</p><p class="fz28" data-v-1afa0ebc>7 | ...</p><p class="fz28" data-v-1afa0ebc>8 | ...</p><p class="fz28" data-v-1afa0ebc>9 | ...</p><p class="fz28" data-v-1afa0ebc>10| ...</p><p class="fz28" data-v-1afa0ebc>11| ...</p><p class="fz28" data-v-1afa0ebc>12| ...</p><p class="fz28" data-v-1afa0ebc>13| ...</p><p class="fz28" data-v-1afa0ebc>14| ...</p><p class="fz28" data-v-1afa0ebc>15|</p><p class="fz28" data-v-1afa0ebc>16| {&quot;code&quot;:123456,&quot;message&quot;:&quot;test&quot;}</p><br data-v-1afa0ebc><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc>HTTP 響應狀態碼</p><p class="fz28" data-v-1afa0ebc>1XX ... 訊息</p><p class="fz28" data-v-1afa0ebc>2XX ... 成功</p><p class="fz28" data-v-1afa0ebc>3XX ... 重定向</p><p class="fz28" data-v-1afa0ebc>4XX ... 客戶端錯誤</p><p class="fz28" data-v-1afa0ebc>5XX ... 服務端錯誤</p><br data-v-1afa0ebc><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc>404 服務器找不到資源</p><br data-v-1afa0ebc><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc>接口文檔</p><p class="fz28" data-v-1afa0ebc> 接口: 使用 AJAX 和 服務器通訊時 , 使用的 URL , 請求方法 , 參數 </p><br data-v-1afa0ebc><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc>XMLHttpRequest</p><p class="fz28" data-v-1afa0ebc>1. 創建 XMLHttpRequest 對象</p><p class="fz28" data-v-1afa0ebc>2. 配 請求方法 &amp; url</p><p class="fz28" data-v-1afa0ebc>3. 監聽 loadend 接收響應結果</p><p class="fz28" data-v-1afa0ebc>4. 發請求</p><div class="bgcVS" data-v-1afa0ebc><div data-v-1afa0ebc><span class="function" data-v-1afa0ebc>const </span><span class="word" data-v-1afa0ebc>xhr</span> <span class="then" data-v-1afa0ebc>=</span><span class="then" data-v-1afa0ebc>new </span><span class="word" data-v-1afa0ebc>XMLHttpRequest</span><span class="brackets" data-v-1afa0ebc>()</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>xhr</span> <span class="variable" data-v-1afa0ebc>.open</span><span class="brackets" data-v-1afa0ebc>(</span><span class="src" data-v-1afa0ebc>&quot;請求方法&quot;,&quot;請求url網址&quot;</span><span class="brackets" data-v-1afa0ebc>)</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>xhr</span><span class="variable" data-v-1afa0ebc>.addEventListener</span><span class="brackets" data-v-1afa0ebc>(</span><span class="src" data-v-1afa0ebc>&quot;loadend&quot;</span> <span class="then" data-v-1afa0ebc>,</span><span class="brackets" data-v-1afa0ebc>()</span> <span class="function" data-v-1afa0ebc>=&gt;</span><span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console.</span><span class="variable" data-v-1afa0ebc>log</span> <span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>xhr.response</span><span class="brackets" data-v-1afa0ebc>)</span><span class="comment" data-v-1afa0ebc>//響應結果</span><div data-v-1afa0ebc><span class="function" data-v-1afa0ebc>const </span><span class="word" data-v-1afa0ebc>data</span> <span class="then" data-v-1afa0ebc>=</span><span class="brackets" data-v-1afa0ebc>JSON</span><span class="variable" data-v-1afa0ebc>.parse</span><span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>xhr.response</span><span class="brackets" data-v-1afa0ebc>)</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console.</span><span class="variable" data-v-1afa0ebc>log</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="word" data-v-1afa0ebc>data</span><span class="brackets" data-v-1afa0ebc>)</span></div><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>xhr</span> <span class="variable" data-v-1afa0ebc>.send</span><span class="brackets" data-v-1afa0ebc>()</span></div></div><div id="threeajax004" class="articleCardTitle cor36 fz34" data-v-1afa0ebc> 9.4 Promise 3 狀態 pending . . . fullfilled . . . rejected </div><p class="fz28" data-v-1afa0ebc>pending 待定: 初始狀態</p><p class="fz28" data-v-1afa0ebc>fullfilled 兌現: 操作成功</p><p class="fz28" data-v-1afa0ebc>rejected 拒絕: 操作失敗</p><br data-v-1afa0ebc><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc>Promise 狀態 一但 兌現 / 拒絕 就 無法再改變</p><br data-v-1afa0ebc><div class="bgcVS" data-v-1afa0ebc><div data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//1.創建Promise對象(pending-待定狀態)</span></div><div data-v-1afa0ebc><span class="function" data-v-1afa0ebc>const </span> <span class="word" data-v-1afa0ebc>p</span><span class="then" data-v-1afa0ebc>=</span> <span class="then" data-v-1afa0ebc>new </span><span class="brackets" data-v-1afa0ebc>Promise</span><span class="brackets" data-v-1afa0ebc>((</span><span class="word" data-v-1afa0ebc>resolve,reject</span><span class="brackets" data-v-1afa0ebc>)</span> <span class="function" data-v-1afa0ebc>=&gt;</span><span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console.</span><span class="variable" data-v-1afa0ebc>log</span> <span class="brackets" data-v-1afa0ebc>(</span><span class="src" data-v-1afa0ebc>&quot;Promise對象創建時,這裡的代碼都會執行了&quot;</span><span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc></div><div data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//2.執行異步代碼</span></div><div data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>setTimeout</span><span class="brackets" data-v-1afa0ebc>(()</span><span class="function" data-v-1afa0ebc>=&gt;</span> <span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//resolve(調用時fullfilled狀態) . . &gt; then()</span><div data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>resolve</span><span class="brackets" data-v-1afa0ebc>(</span><span class="src" data-v-1afa0ebc>&quot;模擬AJAX-成功結果&quot;</span><span class="brackets" data-v-1afa0ebc>)</span></div><div data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//reject(調用時rejected狀態) . . &gt; catch()</span></div><div data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>reject</span><span class="brackets" data-v-1afa0ebc>(</span><span class="then" data-v-1afa0ebc>new </span><span class="word" data-v-1afa0ebc>Error</span><span class="brackets" data-v-1afa0ebc>(</span><span class="src" data-v-1afa0ebc>&quot;模擬AJAX請求-失敗結果&quot;</span><span class="brackets" data-v-1afa0ebc>))</span></div><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>},</span><span class="number" data-v-1afa0ebc>2000</span> <span class="brackets" data-v-1afa0ebc>)</span></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div><div data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//3.獲取結果</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>p</span><span class="variable" data-v-1afa0ebc>.then</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="word" data-v-1afa0ebc>result</span><span class="function" data-v-1afa0ebc>=&gt;</span> <span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console.</span><span class="variable" data-v-1afa0ebc>log</span> <span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>result</span> <span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span><span class="variable" data-v-1afa0ebc>.catch</span><span class="brackets" data-v-1afa0ebc>(</span><span class="variable" data-v-1afa0ebc>error</span><span class="function" data-v-1afa0ebc>=&gt;</span> <span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console.</span><span class="variable" data-v-1afa0ebc>log</span> <span class="brackets" data-v-1afa0ebc>(</span><span class="variable" data-v-1afa0ebc>error</span><span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div></div><p class="fz28" data-v-1afa0ebc>xhr + Promise</p><div class="bgcVS" data-v-1afa0ebc><div data-v-1afa0ebc><span class="then" data-v-1afa0ebc>＜</span> <span class="number" data-v-1afa0ebc>div </span><span class="function" data-v-1afa0ebc>class </span> <span class="then" data-v-1afa0ebc>=</span><span class="src" data-v-1afa0ebc>&quot;showData&quot;</span><span class="then" data-v-1afa0ebc>&gt;＜/ </span> <span class="number" data-v-1afa0ebc>div </span><span class="then" data-v-1afa0ebc>&gt;</span></div><div data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//1.創建Promise對象</span></div><div data-v-1afa0ebc><span class="function" data-v-1afa0ebc>const </span> <span class="word" data-v-1afa0ebc>p</span><span class="then" data-v-1afa0ebc>=</span> <span class="then" data-v-1afa0ebc>new </span><span class="brackets" data-v-1afa0ebc>Promise</span><span class="brackets" data-v-1afa0ebc>((</span><span class="variable" data-v-1afa0ebc>resolve,reject</span><span class="brackets" data-v-1afa0ebc>)</span> <span class="function" data-v-1afa0ebc>=&gt;</span><span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//2.執行xhr異步獲取資料</span><div data-v-1afa0ebc><span class="function" data-v-1afa0ebc>const </span><span class="word" data-v-1afa0ebc>xhr</span> <span class="then" data-v-1afa0ebc>=</span><span class="then" data-v-1afa0ebc>new </span><span class="word" data-v-1afa0ebc>XMLHttpRequest</span><span class="brackets" data-v-1afa0ebc>()</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>xhr</span><span class="variable" data-v-1afa0ebc>.open</span><span class="brackets" data-v-1afa0ebc>(</span><span class="src" data-v-1afa0ebc>&quot;GET&quot;,&quot;放URL&quot;</span><span class="brackets" data-v-1afa0ebc>)</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>xhr</span><span class="variable" data-v-1afa0ebc>.addEventListener</span><span class="brackets" data-v-1afa0ebc>(</span><span class="src" data-v-1afa0ebc>&quot;loadend&quot;</span> <span class="then" data-v-1afa0ebc>,</span><span class="brackets" data-v-1afa0ebc>()</span><span class="function" data-v-1afa0ebc>=&gt;</span> <span class="brackets" data-v-1afa0ebc>{</span></div><div data-v-1afa0ebc></div><div class="padTwo VSL" data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//xhr判斷響應碼,2xx成功</span><div data-v-1afa0ebc><span class="then" data-v-1afa0ebc>if</span> <span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>xhr.status</span><span class="then" data-v-1afa0ebc>&gt;=</span> <span class="number" data-v-1afa0ebc>200</span><span class="word" data-v-1afa0ebc>&amp;&amp;</span><span class="word" data-v-1afa0ebc>xhr.status</span><span class="then" data-v-1afa0ebc>＜</span> <span class="number" data-v-1afa0ebc>300</span><span class="brackets" data-v-1afa0ebc>){</span></div><div data-v-1afa0ebc></div><div class="padTwo VSL" data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>resolve</span><span class="brackets" data-v-1afa0ebc>(</span><span class="brackets" data-v-1afa0ebc>JSON</span><span class="variable" data-v-1afa0ebc>.parse</span><span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>xhr.response</span><span class="brackets" data-v-1afa0ebc>))</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>}</span><span class="then" data-v-1afa0ebc>else </span><span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>reject</span><span class="brackets" data-v-1afa0ebc>(</span><span class="then" data-v-1afa0ebc>new </span><span class="word" data-v-1afa0ebc>Error</span><span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>xhr.response</span><span class="brackets" data-v-1afa0ebc>))</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>}</span></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>xhr</span><span class="variable" data-v-1afa0ebc>.send</span><span class="brackets" data-v-1afa0ebc>()</span></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div><div data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//3.成功執行then,失敗執行catch</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>p</span> <span class="variable" data-v-1afa0ebc>.then</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="word" data-v-1afa0ebc>result</span><span class="function" data-v-1afa0ebc>=&gt;</span> <span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="word" data-v-1afa0ebc>result</span><span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>document</span><span class="variable" data-v-1afa0ebc>.querySelector</span><span class="brackets" data-v-1afa0ebc>(</span><span class="src" data-v-1afa0ebc>&quot;.showData&quot;</span><span class="brackets" data-v-1afa0ebc>)</span><span class="variable" data-v-1afa0ebc>.innerHTML</span><span class="then" data-v-1afa0ebc>=</span> <span class="word" data-v-1afa0ebc>result</span></div><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span><span class="variable" data-v-1afa0ebc>.catch</span><span class="brackets" data-v-1afa0ebc>(</span><span class="variable" data-v-1afa0ebc>error</span><span class="function" data-v-1afa0ebc>=&gt;</span> <span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span><span class="variable" data-v-1afa0ebc>error</span><span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div></div><p class="fz28" data-v-1afa0ebc>模仿 axios 封裝 xhr + Promise</p><div class="bgcVS" data-v-1afa0ebc><div data-v-1afa0ebc><span class="then" data-v-1afa0ebc>＜</span> <span class="number" data-v-1afa0ebc>div </span><span class="function" data-v-1afa0ebc>class </span> <span class="then" data-v-1afa0ebc>=</span><span class="src" data-v-1afa0ebc>&quot;showData&quot;</span><span class="then" data-v-1afa0ebc>&gt;＜/ </span> <span class="number" data-v-1afa0ebc>div </span><span class="then" data-v-1afa0ebc>&gt;</span></div><div data-v-1afa0ebc><span class="function" data-v-1afa0ebc>function </span><span class="word" data-v-1afa0ebc>myAxios</span> <span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>config</span> <span class="brackets" data-v-1afa0ebc>){</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="then" data-v-1afa0ebc>return </span> <span class="then" data-v-1afa0ebc>new </span><span class="brackets" data-v-1afa0ebc>Promise</span><span class="brackets" data-v-1afa0ebc>((</span><span class="variable" data-v-1afa0ebc>resolve,reject</span><span class="brackets" data-v-1afa0ebc>)</span> <span class="function" data-v-1afa0ebc>=&gt;</span><span class="brackets" data-v-1afa0ebc>{</span><div data-v-1afa0ebc></div><div class="padTwo VSL" data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//2.發起xhr,默認請求方法GET</span><div data-v-1afa0ebc><span class="function" data-v-1afa0ebc>const </span><span class="word" data-v-1afa0ebc>xhr</span> <span class="then" data-v-1afa0ebc>=</span><span class="then" data-v-1afa0ebc>new </span><span class="word" data-v-1afa0ebc>XMLHttpRequest</span><span class="brackets" data-v-1afa0ebc>()</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>xhr</span><span class="variable" data-v-1afa0ebc>.open</span><span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>config.method </span><span class="then" data-v-1afa0ebc>||</span> <span class="src" data-v-1afa0ebc>&quot;GET&quot;</span><span class="then" data-v-1afa0ebc>,</span><span class="word" data-v-1afa0ebc>config.url</span><span class="brackets" data-v-1afa0ebc>)</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>xhr</span><span class="variable" data-v-1afa0ebc>.addEventListener</span><span class="brackets" data-v-1afa0ebc>(</span><span class="src" data-v-1afa0ebc>&quot;loadend&quot;</span> <span class="then" data-v-1afa0ebc>,</span><span class="brackets" data-v-1afa0ebc>()</span><span class="function" data-v-1afa0ebc>=&gt;</span><span class="brackets" data-v-1afa0ebc>{</span></div><div data-v-1afa0ebc></div><div class="padTwo VSL" data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//xhr判斷響應碼,2xx成功</span><div data-v-1afa0ebc><span class="then" data-v-1afa0ebc>if</span> <span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>xhr.status</span><span class="then" data-v-1afa0ebc>&gt;=</span> <span class="number" data-v-1afa0ebc>200</span><span class="then" data-v-1afa0ebc>&amp;&amp; </span><span class="word" data-v-1afa0ebc>xhr.status</span><span class="then" data-v-1afa0ebc>＜</span> <span class="number" data-v-1afa0ebc>300</span><span class="brackets" data-v-1afa0ebc>){</span></div><div data-v-1afa0ebc></div><div class="padTwo VSL" data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>resolve</span><span class="brackets" data-v-1afa0ebc>(</span><span class="brackets" data-v-1afa0ebc>JSON</span><span class="variable" data-v-1afa0ebc>.parse</span><span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>xhr.response</span><span class="brackets" data-v-1afa0ebc>))</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>}</span><span class="then" data-v-1afa0ebc>else </span><span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>reject</span><span class="brackets" data-v-1afa0ebc>(</span><span class="then" data-v-1afa0ebc>new </span><span class="word" data-v-1afa0ebc>Error</span><span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>xhr.response</span><span class="brackets" data-v-1afa0ebc>))</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>}</span></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>xhr</span><span class="variable" data-v-1afa0ebc>.send</span><span class="brackets" data-v-1afa0ebc>()</span></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>}</span></div><div data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//3.成功執行then,失敗執行catch</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>myAxios</span> <span class="brackets" data-v-1afa0ebc>({</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>url:</span> <span class="src" data-v-1afa0ebc>&quot;放網址&quot;</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span><span class="variable" data-v-1afa0ebc>.then</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="word" data-v-1afa0ebc>result</span><span class="function" data-v-1afa0ebc>=&gt;</span> <span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="word" data-v-1afa0ebc>result</span><span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>document</span><span class="variable" data-v-1afa0ebc>.querySelector</span><span class="brackets" data-v-1afa0ebc>(</span><span class="src" data-v-1afa0ebc>&quot;.showData&quot;</span><span class="brackets" data-v-1afa0ebc>)</span><span class="variable" data-v-1afa0ebc>.innerHTML</span><span class="then" data-v-1afa0ebc>=</span> <span class="word" data-v-1afa0ebc>result</span></div><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span><span class="variable" data-v-1afa0ebc>.catch</span><span class="brackets" data-v-1afa0ebc>(</span><span class="variable" data-v-1afa0ebc>error</span><span class="function" data-v-1afa0ebc>=&gt;</span> <span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span><span class="variable" data-v-1afa0ebc>error</span><span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>document</span><span class="variable" data-v-1afa0ebc>.querySelector</span><span class="brackets" data-v-1afa0ebc>(</span><span class="src" data-v-1afa0ebc>&quot;.showData&quot;</span><span class="brackets" data-v-1afa0ebc>)</span><span class="variable" data-v-1afa0ebc>.innerHTML</span><span class="then" data-v-1afa0ebc>=</span><span class="word" data-v-1afa0ebc>error.message</span></div><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div></div><p class="fz28" data-v-1afa0ebc>同步</p><p class="fz28" data-v-1afa0ebc>逐行執行 , 原地等待結果後 , 才繼續向下執行</p><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc>異步</p><p class="fz28" data-v-1afa0ebc> 調用後耗時 , 不阻塞代碼執行 , 將來完成後觸發 回調函數 </p><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc>JS哪些是異步?</p><p class="fz28" data-v-1afa0ebc>setTimeout / setInterval</p><p class="fz28" data-v-1afa0ebc>事件</p><p class="fz28" data-v-1afa0ebc>AJAX</p><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc>異步如何接收結果?</p><p class="fz28" data-v-1afa0ebc>回調函數接收</p><br data-v-1afa0ebc><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc>回調地獄 . . . 回調函數嵌套問題</p><p class="fz28" data-v-1afa0ebc>setTimeout(function () {</p><p class="fz28 pTwo" data-v-1afa0ebc>console.log(111);</p><p class="fz28 pTwo" data-v-1afa0ebc>setTimeout(function () {</p><p class="fz28 pFou" data-v-1afa0ebc>console.log(222);</p><p class="fz28 pFou" data-v-1afa0ebc>setTimeout(function () {</p><p class="fz28 pSix" data-v-1afa0ebc>console.log(333);</p><p class="fz28 pFou" data-v-1afa0ebc>}, 1000)</p><p class="fz28 pTwo" data-v-1afa0ebc>}, 2000)</p><p class="fz28" data-v-1afa0ebc>}, 3000)</p><br data-v-1afa0ebc><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc>Promise 鏈式調用</p><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="pad20 bor fz30" data-v-1afa0ebc>new Promise()</span> ➔ <span class="pad20 bor fz30" data-v-1afa0ebc>.then( 回調函數 )</span> ➔ <span class="pad20 bor fz30" data-v-1afa0ebc>新的 Promise 對象</span></div><br data-v-1afa0ebc><div class="fz30" data-v-1afa0ebc><span class="cor17" data-v-1afa0ebc>. . . . . . . . . . . . . . . . . . . . .</span> ↘ 回調函數中 , return 的結果 ↗ </div><div class="bgcVS" data-v-1afa0ebc><div data-v-1afa0ebc><span class="function" data-v-1afa0ebc>const </span> <span class="word" data-v-1afa0ebc>p</span><span class="then" data-v-1afa0ebc>= new </span><span class="brackets" data-v-1afa0ebc>Promise (( </span><span class="variable" data-v-1afa0ebc>resolve,reject</span><span class="brackets" data-v-1afa0ebc>)</span> <span class="function" data-v-1afa0ebc>=&gt;</span><span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>setTimeout</span><span class="brackets" data-v-1afa0ebc>(()</span><span class="function" data-v-1afa0ebc>=&gt;</span> <span class="brackets" data-v-1afa0ebc>{</span><div class="padTwo VSL" data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>resolve</span><span class="brackets" data-v-1afa0ebc>(</span><span class="src" data-v-1afa0ebc>&quot;獲取的資料&quot;</span><span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>},</span><span class="number" data-v-1afa0ebc>2000</span><span class="brackets" data-v-1afa0ebc>)</span></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>p</span> <span class="variable" data-v-1afa0ebc>.then</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="word" data-v-1afa0ebc>result</span><span class="function" data-v-1afa0ebc>=&gt;</span> <span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="word" data-v-1afa0ebc>result</span><span class="brackets" data-v-1afa0ebc>) </span><span class="comment" data-v-1afa0ebc>// 2 秒後打印 &quot;獲取的資料&quot;</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div><div data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//promise調用then後在原地等結果</span></div><div data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//返回一個全新的promise對象</span></div><div data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//const p2 接收</span></div><div data-v-1afa0ebc><span class="function" data-v-1afa0ebc>const </span> <span class="word" data-v-1afa0ebc>p2</span><span class="then" data-v-1afa0ebc>=</span> <span class="word" data-v-1afa0ebc>p</span><span class="variable" data-v-1afa0ebc>.then</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="word" data-v-1afa0ebc>result</span><span class="function" data-v-1afa0ebc>=&gt;</span> <span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="word" data-v-1afa0ebc>result</span><span class="brackets" data-v-1afa0ebc>) </span><span class="comment" data-v-1afa0ebc>// 2 秒後打印 &quot;獲取的資料&quot;</span><div data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//創建Promise對象,模擬再發出請求</span></div><div data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>// return promise 對象最終狀態和結果, 影響到新的 Promise 對象 // p2</span></div><div data-v-1afa0ebc><span class="then" data-v-1afa0ebc>return new </span><span class="brackets" data-v-1afa0ebc>Promise (( </span><span class="variable" data-v-1afa0ebc>resolve,reject</span><span class="brackets" data-v-1afa0ebc>)</span><span class="function" data-v-1afa0ebc>=&gt;</span> <span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>setTimeout</span><span class="brackets" data-v-1afa0ebc>(()</span><span class="function" data-v-1afa0ebc>=&gt;</span> <span class="brackets" data-v-1afa0ebc>{</span><div class="padTwo VSL" data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>resolve</span><span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>result</span> <span class="then" data-v-1afa0ebc>+</span><span class="src" data-v-1afa0ebc>&quot;加上模擬另一次AJAX網路請求&quot;</span><span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>},</span><span class="number" data-v-1afa0ebc>2000</span><span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="word" data-v-1afa0ebc>p2</span><span class="then" data-v-1afa0ebc>===</span> <span class="word" data-v-1afa0ebc>p</span><span class="brackets" data-v-1afa0ebc>)</span><span class="comment" data-v-1afa0ebc>// 打印 false // 證明 p2 是全新的 promise</span></div><div data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>// promise 物件保存在內存地址 // false 證明不在同一個地址</span></div><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//獲取最終結果</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>p2</span> <span class="variable" data-v-1afa0ebc>.then</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="word" data-v-1afa0ebc>result</span><span class="function" data-v-1afa0ebc>=&gt;</span> <span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="word" data-v-1afa0ebc>result</span><span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div></div><p class="fz28" data-v-1afa0ebc>1. 什麼是 Promise 鏈式調用?</p><p class="fz28" data-v-1afa0ebc> 使用 then 函數返回新 Promise 物件特性 , 一直串聯下去 </p><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc>2. then 回調函數中 , return 的值 會傳到 哪裡?</p><p class="fz28" data-v-1afa0ebc>傳給 then 函數生成的 新 Promise 物件</p><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc>3. Promise 鏈式調用有什麼用?</p><p class="fz28" data-v-1afa0ebc>解決 回調嵌套 問題</p><div id="threeajax005" class="articleCardTitle cor36 fz34" data-v-1afa0ebc> 9.5 async await </div><p class="fz28" data-v-1afa0ebc> async await 讓我們更簡潔方式寫出基於 Promise 的異步行為 , </p><p class="fz28" data-v-1afa0ebc>而無須鏈式調用 promise</p><br data-v-1afa0ebc><p class="fz28 cor36" data-v-1afa0ebc>概念:</p><p class="fz28" data-v-1afa0ebc>在 async 函數內 , 用 await 關鍵字 取代 then 函數 ,</p><p class="fz28" data-v-1afa0ebc><span class="spo cor36" data-v-1afa0ebc> 等待 </span> 獲取 Promise 對象成功狀態的結果值 </p><div class="bgcVS" data-v-1afa0ebc><div data-v-1afa0ebc><span class="function" data-v-1afa0ebc>async function </span><span class="word" data-v-1afa0ebc>getData</span><span class="brackets" data-v-1afa0ebc>(){</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>try</span> <span class="brackets" data-v-1afa0ebc>{</span><div data-v-1afa0ebc></div></div><div class="padTwo VSL" data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//axios在原地返回一個promise對象</span><div data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//await後面接Promise物件&quot;成功狀態&quot;結果值</span></div><div data-v-1afa0ebc><span class="function" data-v-1afa0ebc>const </span><span class="word" data-v-1afa0ebc>pObj</span> <span class="then" data-v-1afa0ebc>=</span><span class="then" data-v-1afa0ebc>await </span><span class="variable" data-v-1afa0ebc>axios</span><span class="brackets" data-v-1afa0ebc>({</span> <span class="word" data-v-1afa0ebc>url:</span><span class="src" data-v-1afa0ebc>&quot;https://randomuser.me/api/&quot;</span><span class="brackets" data-v-1afa0ebc>})</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="word" data-v-1afa0ebc>pObj</span><span class="brackets" data-v-1afa0ebc>)</span></div><div data-v-1afa0ebc><span class="function" data-v-1afa0ebc>const </span><span class="word" data-v-1afa0ebc>name</span> <span class="then" data-v-1afa0ebc>=</span><span class="word" data-v-1afa0ebc>pObj.results</span><span class="brackets" data-v-1afa0ebc>[</span> <span class="number" data-v-1afa0ebc>0</span><span class="brackets" data-v-1afa0ebc>]</span> <span class="word" data-v-1afa0ebc>.name</span></div><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>}</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>getData</span> <span class="brackets" data-v-1afa0ebc>()</span></div></div><p class="fz28" data-v-1afa0ebc>async await 捕獲錯誤</p><div class="bgcVS" data-v-1afa0ebc><div data-v-1afa0ebc><span class="function" data-v-1afa0ebc>async function </span><span class="word" data-v-1afa0ebc>getData</span><span class="brackets" data-v-1afa0ebc>(){</span></div><div class="padTwo VSL" data-v-1afa0ebc><div data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//try只要某行發生錯誤,以下就不執行,往catch執行</span></div><div data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>try</span><span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//axios在原地返回一個promise對象</span><div data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//await後面接Promise物件&quot;成功狀態&quot;結果值</span></div><div data-v-1afa0ebc><span class="function" data-v-1afa0ebc>const </span><span class="word" data-v-1afa0ebc>pObj</span> <span class="then" data-v-1afa0ebc>=</span><span class="then" data-v-1afa0ebc>await </span><span class="variable" data-v-1afa0ebc>axios</span><span class="brackets" data-v-1afa0ebc>({</span><span class="word" data-v-1afa0ebc>url:</span><span class="src" data-v-1afa0ebc>&quot;https://randomuser.me/api/&quot;</span><span class="brackets" data-v-1afa0ebc>})</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="word" data-v-1afa0ebc>pObj</span><span class="brackets" data-v-1afa0ebc>)</span></div><div data-v-1afa0ebc><span class="function" data-v-1afa0ebc>const </span><span class="word" data-v-1afa0ebc>name</span> <span class="then" data-v-1afa0ebc>=</span><span class="word" data-v-1afa0ebc>pObj.results</span><span class="brackets" data-v-1afa0ebc>[</span> <span class="number" data-v-1afa0ebc>0</span><span class="brackets" data-v-1afa0ebc>]</span><span class="word" data-v-1afa0ebc>.name</span></div><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>}</span><span class="variable" data-v-1afa0ebc>catch</span><span class="brackets" data-v-1afa0ebc>(</span><span class="variable" data-v-1afa0ebc>error</span><span class="brackets" data-v-1afa0ebc>){</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.dir</span><span class="brackets" data-v-1afa0ebc>(</span><span class="variable" data-v-1afa0ebc>error</span><span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>}</span></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>}</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>getData</span> <span class="brackets" data-v-1afa0ebc>()</span></div></div><div id="threeajax006" class="articleCardTitle cor36 fz34" data-v-1afa0ebc> 9.6 事件循環 EventLoop </div><p class="fz28" data-v-1afa0ebc> JS 是單線呈 (逐行執行代碼) , 為了 耗時代碼 不阻塞其他代碼 , 設計了事件循環 </p><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc> 事件循環負責執行代碼 、 收集 、 處理事件 、 執行隊列中子任務 </p><div class="dis" data-v-1afa0ebc><div class="bgcVS w100" data-v-1afa0ebc><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="number" data-v-1afa0ebc>1</span><span class="brackets" data-v-1afa0ebc>)</span></div><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>setTimeout</span><span class="brackets" data-v-1afa0ebc>(()</span><span class="function" data-v-1afa0ebc>=&gt;</span> <span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="number" data-v-1afa0ebc>2</span><span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>},</span> <span class="number" data-v-1afa0ebc>0</span><span class="brackets" data-v-1afa0ebc>)</span></div><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="number" data-v-1afa0ebc>3</span><span class="brackets" data-v-1afa0ebc>)</span></div><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>setTimeout</span><span class="brackets" data-v-1afa0ebc>(()</span><span class="function" data-v-1afa0ebc>=&gt;</span> <span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="number" data-v-1afa0ebc>4</span><span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>},</span><span class="number" data-v-1afa0ebc>2000</span><span class="brackets" data-v-1afa0ebc>)</span></div><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="number" data-v-1afa0ebc>5</span><span class="brackets" data-v-1afa0ebc>)</span></div><br data-v-1afa0ebc><p data-v-1afa0ebc>控制台打印: 1 3 5 2 4</p></div><span class="cor17" data-v-1afa0ebc>____</span><div class="bgcVS cor36" data-v-1afa0ebc><div data-v-1afa0ebc>調用棧</div></div><span class="cor17" data-v-1afa0ebc>____</span><div class="w100" data-v-1afa0ebc><div class="bgcVS" data-v-1afa0ebc><p class="cor36" data-v-1afa0ebc>宿主環境(瀏覽器)</p><br data-v-1afa0ebc><p data-v-1afa0ebc>放耗時異步代碼</p><div data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>setTimeout</span><span class="brackets" data-v-1afa0ebc>(()</span><span class="function" data-v-1afa0ebc>=&gt;</span><span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span><span class="number" data-v-1afa0ebc>2</span><span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>},</span><span class="number" data-v-1afa0ebc>0</span><span class="brackets" data-v-1afa0ebc>)</span></div><div data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>setTimeout</span><span class="brackets" data-v-1afa0ebc>(()</span><span class="function" data-v-1afa0ebc>=&gt;</span><span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span><span class="number" data-v-1afa0ebc>4</span><span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>},</span><span class="number" data-v-1afa0ebc>2000</span><span class="brackets" data-v-1afa0ebc>)</span></div></div><div class="bgcVS" data-v-1afa0ebc><p class="cor36" data-v-1afa0ebc>任務隊列</p><br data-v-1afa0ebc><p data-v-1afa0ebc>回調放這邊排隊</p><br data-v-1afa0ebc><p data-v-1afa0ebc>調用棧空閒時,</p><p data-v-1afa0ebc>循環查找隊列執行</p></div></div></div><p class="fz28" data-v-1afa0ebc>1. 什麼是 事件循環?</p><p class="fz28" data-v-1afa0ebc> 執行代碼 和 收集異步任務 , 在調用棧 空閒時 , 反覆調用 任務隊列裡 回調函數 執行機制 </p><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc>2. 為什麼要事件循環?</p><p class="fz28" data-v-1afa0ebc>JS 單線呈 , 為了 不阻塞 JS 引擎</p><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc>3. JS 代碼怎麼執行?</p><p class="fz28" data-v-1afa0ebc>執行 同步代碼 , 遇到異步 交給 宿主瀏覽器環境執行</p><p class="fz28" data-v-1afa0ebc>異步有結果後 , 把回調函數 放入 任務隊列排隊</p><p class="fz28" data-v-1afa0ebc>當 調用棧 空閒時 , 反覆調用 任務隊列裡 的回調函數</p><div id="threeajax007" class="articleCardTitle cor36 fz34" data-v-1afa0ebc> 9.7 宏任務 微任務 </div><p class="fz28" data-v-1afa0ebc>ES6 引入 Promise物件 , 讓 JS 引擎可發起異步任務</p><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc>宏任務: 由 瀏覽器環境執行的 異步代碼</p><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc>微任務: 由 JS 引擎環境執行的 異步代碼</p><br data-v-1afa0ebc><br data-v-1afa0ebc><br data-v-1afa0ebc><table data-v-1afa0ebc><tr data-v-1afa0ebc><th data-v-1afa0ebc><div class="pad20 fz36" data-v-1afa0ebc>宏任務</div></th><th data-v-1afa0ebc><div class="pad20 fz36" data-v-1afa0ebc>執行環境</div></th><th data-v-1afa0ebc><div class="pad20 fz36" data-v-1afa0ebc>微任務</div></th><th data-v-1afa0ebc><div class="pad20 fz36" data-v-1afa0ebc>執行環境</div></th></tr><tr data-v-1afa0ebc><td data-v-1afa0ebc><div class="pad20 fz30" data-v-1afa0ebc>JS腳本 (script)</div></td><td data-v-1afa0ebc><div class="pad20 fz30" data-v-1afa0ebc>瀏覽器</div></td><td data-v-1afa0ebc><div class="pad20 fz30" data-v-1afa0ebc> Promise物件<span class="cor36" data-v-1afa0ebc>.then</span></div></td><td data-v-1afa0ebc><div class="pad20 fz30" data-v-1afa0ebc>JS引擎</div></td></tr><tr data-v-1afa0ebc><td data-v-1afa0ebc><div class="padL20 fz30" data-v-1afa0ebc>setTimeout</div><div class="padL20 fz30" data-v-1afa0ebc>setInterval</div></td><td data-v-1afa0ebc><div class="pad20 fz30" data-v-1afa0ebc>瀏覽器</div></td><td data-v-1afa0ebc><div class="pad20" data-v-1afa0ebc></div></td><td data-v-1afa0ebc><div class="pad20" data-v-1afa0ebc></div></td></tr><tr data-v-1afa0ebc><td data-v-1afa0ebc><div class="pad20 fz30" data-v-1afa0ebc>AJAX請求完成事件</div></td><td data-v-1afa0ebc><div class="pad20 fz30" data-v-1afa0ebc>瀏覽器</div></td><td data-v-1afa0ebc><div class="pad20" data-v-1afa0ebc></div></td><td data-v-1afa0ebc><div class="pad20" data-v-1afa0ebc></div></td></tr><tr data-v-1afa0ebc><td data-v-1afa0ebc><div class="pad20 fz30" data-v-1afa0ebc>用戶交互事件</div></td><td data-v-1afa0ebc><div class="pad20 fz30" data-v-1afa0ebc>瀏覽器</div></td><td data-v-1afa0ebc><div class="pad20" data-v-1afa0ebc></div></td><td data-v-1afa0ebc><div class="pad20" data-v-1afa0ebc></div></td></tr></table><div class="dis" data-v-1afa0ebc><div class="bgcVS w100" data-v-1afa0ebc><div data-v-1afa0ebc><span class="then" data-v-1afa0ebc>＜</span><span class="number" data-v-1afa0ebc>script </span> <span class="then" data-v-1afa0ebc>&gt;</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="number" data-v-1afa0ebc>1</span><span class="brackets" data-v-1afa0ebc>)</span></div><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>setTimeout</span><span class="brackets" data-v-1afa0ebc>(()</span><span class="function" data-v-1afa0ebc>=&gt;</span> <span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="number" data-v-1afa0ebc>2</span><span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>},</span> <span class="number" data-v-1afa0ebc>0</span><span class="brackets" data-v-1afa0ebc>)</span></div><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="function" data-v-1afa0ebc>const </span><span class="word" data-v-1afa0ebc>p</span> <span class="then" data-v-1afa0ebc>= new </span><span class="brackets" data-v-1afa0ebc>Promise</span><span class="brackets" data-v-1afa0ebc>((</span><span class="variable" data-v-1afa0ebc>resolve,reject</span><span class="brackets" data-v-1afa0ebc>)</span><span class="function" data-v-1afa0ebc>=&gt;</span> <span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="number" data-v-1afa0ebc>2</span><span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>resolve</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="number" data-v-1afa0ebc>4</span><span class="brackets" data-v-1afa0ebc>)</span></div><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>p</span> <span class="variable" data-v-1afa0ebc>.then</span><span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>result</span><span class="function" data-v-1afa0ebc>=&gt;</span> <span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>result</span> <span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="number" data-v-1afa0ebc>5</span><span class="brackets" data-v-1afa0ebc>)</span></div><div data-v-1afa0ebc><span class="then" data-v-1afa0ebc>＜/</span><span class="number" data-v-1afa0ebc>script </span> <span class="then" data-v-1afa0ebc>&gt;</span></div><br data-v-1afa0ebc><p data-v-1afa0ebc>控制台打印: 1 3 5</p><br data-v-1afa0ebc><p data-v-1afa0ebc>現在調用棧空閒</p><p data-v-1afa0ebc>宏&amp;微 執行哪個?</p><p class="cor36" data-v-1afa0ebc>優先 微</p><p data-v-1afa0ebc>直到 微隊列 清空</p><p data-v-1afa0ebc>再執行 宏</p></div><span class="cor29" data-v-1afa0ebc>_</span><div class="bgcVS cor36" data-v-1afa0ebc><div data-v-1afa0ebc>調用棧</div></div><span class="cor29" data-v-1afa0ebc>_</span><div class="w100" data-v-1afa0ebc><div class="bgcVS" data-v-1afa0ebc><div class="cor36" data-v-1afa0ebc>宿主環境(瀏覽器)</div><div data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>setTimeout</span><span class="brackets" data-v-1afa0ebc>(()</span><span class="function" data-v-1afa0ebc>=&gt;</span><span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="number" data-v-1afa0ebc>2</span><span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>},</span> <span class="number" data-v-1afa0ebc>0</span><span class="brackets" data-v-1afa0ebc>)</span></div></div><div class="bgcVS" data-v-1afa0ebc><div class="cor36" data-v-1afa0ebc><span class="spoGra" data-v-1afa0ebc> 宏任務隊列 </span></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>()</span><span class="function" data-v-1afa0ebc>=&gt;</span><span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="number" data-v-1afa0ebc>2</span><span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>}</span></div></div><div class="bgcVS" data-v-1afa0ebc><div class="cor36" data-v-1afa0ebc><span class="spoGra" data-v-1afa0ebc> 微任務隊列 </span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>result</span><span class="function" data-v-1afa0ebc>=&gt;</span><span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>result</span><span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>}</span></div></div></div></div><p class="fz28" data-v-1afa0ebc>1. 什麼是宏任務?</p><p class="fz28" data-v-1afa0ebc>瀏覽器執行的 異步代碼</p><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc>JS腳本 (script)</p><p class="fz28" data-v-1afa0ebc>setTimeout</p><p class="fz28" data-v-1afa0ebc>AJAX請求完成事件</p><p class="fz28" data-v-1afa0ebc>用戶交互事件</p><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc>2. 什麼是微任務?</p><p class="fz28" data-v-1afa0ebc>JS 引擎執行的 異步代碼</p><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc>Promise物件.then() 的回調</p><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc>3. JS 代碼如何執行?</p><p class="fz28" data-v-1afa0ebc>執行第一個 script 腳本事件 宏任務 , 裡面 同步代碼</p><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc> 遇到 宏任務 / 微任務 交給 宿主環境 , 有 結果 回調函數 進入 對應 隊列 </p><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc> 當執行棧 空閒時 , 清空 微任務隊列 , 再執行 下一個 宏任務 </p><div class="bgcVS" data-v-1afa0ebc><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="number" data-v-1afa0ebc>1</span><span class="brackets" data-v-1afa0ebc>)</span></div><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>setTimeout</span><span class="brackets" data-v-1afa0ebc>(()</span><span class="function" data-v-1afa0ebc>=&gt;</span> <span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="number" data-v-1afa0ebc>2</span><span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc><span class="function" data-v-1afa0ebc>const </span><span class="number" data-v-1afa0ebc>p </span> <span class="then" data-v-1afa0ebc>= new </span><span class="brackets" data-v-1afa0ebc>Promise</span><span class="brackets" data-v-1afa0ebc>(</span><span class="variable" data-v-1afa0ebc>resolve</span><span class="function" data-v-1afa0ebc>=&gt;</span><span class="variable" data-v-1afa0ebc>resolve</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="number" data-v-1afa0ebc>3</span><span class="brackets" data-v-1afa0ebc>))</span></div><div data-v-1afa0ebc><span class="number" data-v-1afa0ebc>p </span><span class="variable" data-v-1afa0ebc>.then</span><span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>result</span><span class="function" data-v-1afa0ebc>=&gt;</span><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span><span class="word" data-v-1afa0ebc>result</span><span class="brackets" data-v-1afa0ebc>))</span></div><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>},</span> <span class="number" data-v-1afa0ebc>0</span><span class="brackets" data-v-1afa0ebc>)</span></div><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="function" data-v-1afa0ebc>const </span><span class="number" data-v-1afa0ebc>p </span> <span class="then" data-v-1afa0ebc>= new </span><span class="brackets" data-v-1afa0ebc>Promise</span><span class="brackets" data-v-1afa0ebc>(</span><span class="variable" data-v-1afa0ebc>resolve</span><span class="function" data-v-1afa0ebc>=&gt;</span> <span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>setTimeout</span><span class="brackets" data-v-1afa0ebc>(()</span><span class="function" data-v-1afa0ebc>=&gt;</span> <span class="brackets" data-v-1afa0ebc>{</span><div data-v-1afa0ebc></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="number" data-v-1afa0ebc>4</span><span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>},</span> <span class="number" data-v-1afa0ebc>0</span><span class="brackets" data-v-1afa0ebc>)</span></div><div data-v-1afa0ebc><span class="variable" data-v-1afa0ebc>resolve</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="number" data-v-1afa0ebc>5</span><span class="brackets" data-v-1afa0ebc>)</span></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="number" data-v-1afa0ebc>p </span><span class="variable" data-v-1afa0ebc>.then</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="word" data-v-1afa0ebc>result</span><span class="function" data-v-1afa0ebc>=&gt;</span><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="word" data-v-1afa0ebc>result</span><span class="brackets" data-v-1afa0ebc>))</span></div><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="function" data-v-1afa0ebc>const </span> <span class="word" data-v-1afa0ebc>p2</span><span class="then" data-v-1afa0ebc>= new </span><span class="brackets" data-v-1afa0ebc>Promise</span><span class="brackets" data-v-1afa0ebc>(</span><span class="variable" data-v-1afa0ebc>resolve</span><span class="function" data-v-1afa0ebc>=&gt;</span><span class="variable" data-v-1afa0ebc>resolve</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="number" data-v-1afa0ebc>6</span><span class="brackets" data-v-1afa0ebc>))</span></div><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>p2</span> <span class="variable" data-v-1afa0ebc>.then</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="word" data-v-1afa0ebc>result</span><span class="function" data-v-1afa0ebc>=&gt;</span><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="word" data-v-1afa0ebc>result</span><span class="brackets" data-v-1afa0ebc>))</span></div><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="number" data-v-1afa0ebc>7</span><span class="brackets" data-v-1afa0ebc>)</span></div></div><p class="fz28" data-v-1afa0ebc> setTimeout ... 宏任務 ... 交給瀏覽器...... 發現 時間到 0...推入宏任務列隊 </p><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc> new Promise ... 同步 ... 放調用棧 ... resolve立刻執行 ... setTimout放宿主環境 ... 發現倒數0,放進宏任務隊列 </p><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc> p 調用的 then 方法 同步 ... then 裡面異步 ... 只有當 promise 狀態改變後 , 才把 then 裡面回調推入到 微任務隊列 </p><br data-v-1afa0ebc><div data-v-1afa0ebc><img class="w100" src="'+T+'" data-v-1afa0ebc></div><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc>然後 清空微任務隊列</p><p class="fz28" data-v-1afa0ebc>再執行 宏任務 1.</p><p class="fz28" data-v-1afa0ebc>resolve 改變 promise 狀態</p><p class="fz28" data-v-1afa0ebc>.then(裡面的回調推入微任務)</p><br data-v-1afa0ebc><p class="fz28" data-v-1afa0ebc>!! 先執行微任務 !!</p><br data-v-1afa0ebc><br data-v-1afa0ebc><br data-v-1afa0ebc><p class="fz36 cor36" data-v-1afa0ebc>Promise.all</p><p class="fz28" data-v-1afa0ebc> 合併多個 Promise 對象 , 等待所有 <span class="spo cor36" data-v-1afa0ebc>同時成功完成</span> or 某一個失敗 , 後續處理 </p><br data-v-1afa0ebc><div class="dis" data-v-1afa0ebc><div class="bor pad20" data-v-1afa0ebc><br data-v-1afa0ebc><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="bor pad20 fz28" data-v-1afa0ebc>new Peomise()</span></div><br data-v-1afa0ebc><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="bor pad20 fz28" data-v-1afa0ebc>new Peomise()</span></div><br data-v-1afa0ebc><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="bor pad20 fz28" data-v-1afa0ebc>new Peomise()</span></div><br data-v-1afa0ebc><br data-v-1afa0ebc></div><div class="pad20" data-v-1afa0ebc><div data-v-1afa0ebc><br data-v-1afa0ebc><br data-v-1afa0ebc><span class="fz28" data-v-1afa0ebc>..&gt;</span></div></div><div class="pad20" data-v-1afa0ebc><div class="bor disInl pad20" data-v-1afa0ebc><span class="fz28" data-v-1afa0ebc>新的</span><br data-v-1afa0ebc><span class="fz28" data-v-1afa0ebc>Promise</span><br data-v-1afa0ebc><span class="fz28" data-v-1afa0ebc>對象</span></div></div><div class="pad20" data-v-1afa0ebc><div data-v-1afa0ebc><span class="fz28" data-v-1afa0ebc>所有 ..&gt;</span></div><div data-v-1afa0ebc><span class="fz28" data-v-1afa0ebc>Promise</span></div><div data-v-1afa0ebc><span class="fz28" data-v-1afa0ebc>都成功</span></div><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="fz28" data-v-1afa0ebc>任一個 ..&gt;</span></div><div data-v-1afa0ebc><span class="fz28" data-v-1afa0ebc>Promise</span></div><div data-v-1afa0ebc><span class="fz28" data-v-1afa0ebc>失敗</span></div></div><div class="pad20" data-v-1afa0ebc><div data-v-1afa0ebc><span class="bor pad20 fz28" data-v-1afa0ebc>.then(回調函數)</span></div><br data-v-1afa0ebc><br data-v-1afa0ebc><br data-v-1afa0ebc><br data-v-1afa0ebc><br data-v-1afa0ebc><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="bor pad20 fz28" data-v-1afa0ebc>.catch(回調函數)</span></div><br data-v-1afa0ebc></div></div><br data-v-1afa0ebc><div class="bgcVS" data-v-1afa0ebc><div data-v-1afa0ebc><span class="function" data-v-1afa0ebc>const </span><span class="number" data-v-1afa0ebc>p </span> <span class="then" data-v-1afa0ebc>=</span><span class="brackets" data-v-1afa0ebc>Promise</span><span class="variable" data-v-1afa0ebc>.all</span><span class="brackets" data-v-1afa0ebc>([</span><span class="word" data-v-1afa0ebc>Promise對象,Promise對象,...</span><span class="brackets" data-v-1afa0ebc>])</span></div><div data-v-1afa0ebc><span class="number" data-v-1afa0ebc>p </span><span class="variable" data-v-1afa0ebc>.then</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="word" data-v-1afa0ebc>result</span><span class="function" data-v-1afa0ebc>=&gt;</span> <span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//result結果:[Promise對象成功結果,Promise對象成功結果,...]</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span><span class="variable" data-v-1afa0ebc>.catch</span><span class="brackets" data-v-1afa0ebc>(</span><span class="variable" data-v-1afa0ebc>error</span><span class="function" data-v-1afa0ebc>=&gt;</span> <span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//第一個失敗的Promise對象,拋出的異常</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div></div><div class="bgcVS" data-v-1afa0ebc><div data-v-1afa0ebc><span class="then" data-v-1afa0ebc>＜</span> <span class="number" data-v-1afa0ebc>ul </span><span class="function" data-v-1afa0ebc>class </span> <span class="then" data-v-1afa0ebc>=</span><span class="src" data-v-1afa0ebc>&quot;my-ul&quot;</span> <span class="word" data-v-1afa0ebc>&gt;＜</span><span class="number" data-v-1afa0ebc>ul</span> <span class="then" data-v-1afa0ebc>&gt;</span></div><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="function" data-v-1afa0ebc>const </span><span class="brackets" data-v-1afa0ebc>bjPromise</span><span class="then" data-v-1afa0ebc>=</span><span class="variable" data-v-1afa0ebc>axios</span><span class="brackets" data-v-1afa0ebc>({</span> <span class="word" data-v-1afa0ebc>url:</span><span class="src" data-v-1afa0ebc>&quot;api/weather&quot;</span><span class="word" data-v-1afa0ebc>,params:</span><span class="brackets" data-v-1afa0ebc>{</span> <span class="word" data-v-1afa0ebc>city:</span><span class="src" data-v-1afa0ebc>&quot;110100&quot;</span><span class="brackets" data-v-1afa0ebc>}})</span></div><div data-v-1afa0ebc><span class="function" data-v-1afa0ebc>const </span><span class="brackets" data-v-1afa0ebc>shPromise</span><span class="then" data-v-1afa0ebc>=</span><span class="variable" data-v-1afa0ebc>axios</span><span class="brackets" data-v-1afa0ebc>({</span> <span class="word" data-v-1afa0ebc>url:</span><span class="src" data-v-1afa0ebc>&quot;api/weather&quot;</span><span class="word" data-v-1afa0ebc>,params:</span><span class="brackets" data-v-1afa0ebc>{</span> <span class="word" data-v-1afa0ebc>city:</span><span class="src" data-v-1afa0ebc>&quot;310100&quot;</span><span class="brackets" data-v-1afa0ebc>}})</span></div><div data-v-1afa0ebc><span class="function" data-v-1afa0ebc>const </span><span class="brackets" data-v-1afa0ebc>gzPromise</span><span class="then" data-v-1afa0ebc>=</span><span class="variable" data-v-1afa0ebc>axios</span><span class="brackets" data-v-1afa0ebc>({</span> <span class="word" data-v-1afa0ebc>url:</span><span class="src" data-v-1afa0ebc>&quot;api/weather&quot;</span><span class="word" data-v-1afa0ebc>,params:</span><span class="brackets" data-v-1afa0ebc>{</span> <span class="word" data-v-1afa0ebc>city:</span><span class="src" data-v-1afa0ebc>&quot;440100&quot;</span><span class="brackets" data-v-1afa0ebc>}})</span></div><div data-v-1afa0ebc><span class="function" data-v-1afa0ebc>const </span><span class="brackets" data-v-1afa0ebc>szPromise</span><span class="then" data-v-1afa0ebc>=</span><span class="variable" data-v-1afa0ebc>axios</span><span class="brackets" data-v-1afa0ebc>({</span> <span class="word" data-v-1afa0ebc>url:</span><span class="src" data-v-1afa0ebc>&quot;api/weather&quot;</span><span class="word" data-v-1afa0ebc>,params:</span><span class="brackets" data-v-1afa0ebc>{</span> <span class="word" data-v-1afa0ebc>city:</span><span class="src" data-v-1afa0ebc>&quot;440300&quot;</span><span class="brackets" data-v-1afa0ebc>}})</span></div><br data-v-1afa0ebc><p data-v-1afa0ebc> 思想: 把 city 編碼 放到數組裡 , 遍歷 數組裡 每個城市編碼 , 創建一個 axios 請求 </p><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="comment" data-v-1afa0ebc>//Peomise.all合併多個Promise對象</span></div><div data-v-1afa0ebc><span class="function" data-v-1afa0ebc>const </span><span class="number" data-v-1afa0ebc>p </span> <span class="then" data-v-1afa0ebc>=</span><span class="brackets" data-v-1afa0ebc>Promise</span><span class="variable" data-v-1afa0ebc>.all</span><span class="brackets" data-v-1afa0ebc>([</span><span class="word" data-v-1afa0ebc>bjPromise,shPromise,gzPromise,szPromise</span><span class="brackets" data-v-1afa0ebc>])</span></div><div data-v-1afa0ebc><span class="number" data-v-1afa0ebc>p </span><span class="variable" data-v-1afa0ebc>.then</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="word" data-v-1afa0ebc>result</span><span class="function" data-v-1afa0ebc>=&gt;</span> <span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.log</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="word" data-v-1afa0ebc>result</span><span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc></div><br data-v-1afa0ebc><div data-v-1afa0ebc><span class="function" data-v-1afa0ebc>const </span><span class="word" data-v-1afa0ebc>htmlStr</span> <span class="then" data-v-1afa0ebc>=</span><span class="word" data-v-1afa0ebc>result</span><span class="variable" data-v-1afa0ebc>.map</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="word" data-v-1afa0ebc>item</span><span class="function" data-v-1afa0ebc>=&gt;</span> <span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="then" data-v-1afa0ebc>return </span><span class="src" data-v-1afa0ebc>`＜li&gt;</span> <span class="then" data-v-1afa0ebc>${</span><span class="word" data-v-1afa0ebc>item.data.data.area</span><span class="then" data-v-1afa0ebc>}</span> <span class="word" data-v-1afa0ebc>---</span><span class="then" data-v-1afa0ebc>${</span><span class="word" data-v-1afa0ebc>item.data.data.weather</span><span class="then" data-v-1afa0ebc>}</span> <span class="src" data-v-1afa0ebc>＜/li&gt;`</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span><span class="variable" data-v-1afa0ebc>.join</span><span class="brackets" data-v-1afa0ebc>(</span> <span class="then" data-v-1afa0ebc>&#39;&#39;</span><span class="brackets" data-v-1afa0ebc>)</span></div><div data-v-1afa0ebc><span class="word" data-v-1afa0ebc>document</span><span class="variable" data-v-1afa0ebc>.querySelector</span><span class="brackets" data-v-1afa0ebc>(</span><span class="src" data-v-1afa0ebc>&quot;.my-ul&quot;</span><span class="brackets" data-v-1afa0ebc>)</span><span class="variable" data-v-1afa0ebc>.innerHTML</span><span class="then" data-v-1afa0ebc>=</span> <span class="word" data-v-1afa0ebc>htmlStr</span></div><br data-v-1afa0ebc></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span><span class="variable" data-v-1afa0ebc>.catch</span><span class="brackets" data-v-1afa0ebc>(</span><span class="variable" data-v-1afa0ebc>error</span><span class="function" data-v-1afa0ebc>=&gt;</span> <span class="brackets" data-v-1afa0ebc>{</span></div><div class="padTwo VSL" data-v-1afa0ebc><span class="word" data-v-1afa0ebc>console</span><span class="variable" data-v-1afa0ebc>.dir</span><span class="brackets" data-v-1afa0ebc>(</span><span class="variable" data-v-1afa0ebc>error</span><span class="brackets" data-v-1afa0ebc>)</span><div data-v-1afa0ebc></div></div><div data-v-1afa0ebc><span class="brackets" data-v-1afa0ebc>})</span></div></div><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p><p class="fz28" data-v-1afa0ebc></p></div></div></div>',1),P=r(()=>a("div",{class:"toTopButton"},[a("div",{class:"disCen"},"___"),a("div",{class:"disCen"},"▲")],-1)),y=[P],j=r(()=>a("div",{class:"toBotButton"},[a("div",{class:"disCen"},"▼"),a("div",{class:"disCen"},"￣")],-1)),_=[j],J={__name:"JsPageThreeNine",setup(t){const d=u(!1);window.addEventListener("scroll",function(){d.value=window.scrollY>0});function i(){window.scrollTo({top:0,left:0,behavior:"smooth"})}function o(){window.scrollTo({top:999999,left:0,behavior:"smooth"})}function c(p){window.scrollTo({top:document.getElementById(`${p}`).offsetTop,behavior:"smooth"})}return(p,s)=>(k(),w(m,null,[a("section",null,[a("div",S,[a("div",L,[a("div",x,[a("div",{onClick:s[0]||(s[0]=e=>c("threeajax001")),class:"leftNavText"},"AJAX"),a("div",{onClick:s[1]||(s[1]=e=>c("threeajax002")),class:"leftNavText"}," xhr.axios.fetch "),a("div",{onClick:s[2]||(s[2]=e=>c("threeajax003")),class:"leftNavText"},"axios"),a("div",{onClick:s[3]||(s[3]=e=>c("threeajax004")),class:"leftNavText"}," Promise狀態 "),a("div",{onClick:s[4]||(s[4]=e=>c("threeajax005")),class:"leftNavText"}," async await "),a("div",{onClick:s[5]||(s[5]=e=>c("threeajax006")),class:"leftNavText"}," 事件循環 "),a("div",{onClick:s[6]||(s[6]=e=>c("threeajax007")),class:"leftNavText"}," 宏任務微任務 ")])])]),V]),a("div",null,[n(b(l,{name:"fade",tag:"div"},{default:f(()=>[a("div",{onClick:i,class:"toTop"},y)]),_:1},512),[[v,d.value]]),n(b(l,{name:"fade",tag:"div"},{default:f(()=>[a("div",{onClick:o,class:"toBot"},_)]),_:1},512),[[v,d.value]])])],64))}},C=q(J,[["__scopeId","data-v-1afa0ebc"]]);export{C as default};
